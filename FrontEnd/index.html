<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

    <style>
        #map { height: 100%; border-radius: 8px;}
        #search-container {
            position: absolute;
            top: 130px; /* Adjust the vertical position as needed */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }
        #search-bar {
            padding: 8px; /* Extra padding for a more pill-like shape */
            width: 600px;
            border: 3px solid #ccc;
            border-radius: 999px; /* High border-radius value to make it fully rounded */
            outline: none; 
        }
        /* Sidebar styles */
        #menu-toggle {
            display: none;
        }
        #menu-icon {
            font-size: 30px;
            cursor: pointer;
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 999;
        }
        #sidebar {
            position: fixed;
            left: -250px;
            top: 0;
            height: 100%;
            width: 250px;
            background-color: #111;
            transition: 0.3s;
            overflow: hidden;
        }
        #sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 15px;
            text-align: center;
        }
        #sidebar a:hover {
            background-color: #575757;
        }
        #menu-toggle:checked + #menu-icon + #sidebar {
            left: 0;
        }
        /* Main content area */
        #main {
            transition: margin-left .3s;
            padding: 20px;
        }
        #menu-toggle:checked + #menu-icon + #sidebar + #main {
            margin-left: 250px;
        }
        /* Button Container for Alignment */
        #button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px; /* Adds spacing between buttons and form */
        }
    </style>
</head>

<body class="index-page">

    <!-- Search Bar -->
    <div id="search-container">
        <input type="text" id="search-bar" placeholder="Search for places">
    </div>

    <!-- Sidebar and Hamburger Menu -->
    <input type="checkbox" id="menu-toggle">
    <label for="menu-toggle" id="menu-icon">&#9776;</label>
    <div id="sidebar">
        <a href="index.html" class="menu-item">Map</a>
        <a href="#reviews" class="menu-item">Request/Review Location</a>
    </div>


    <div id="main">  
        <div class="home-content">
            <h1 style="color: black;"><b>WildMap</b></h1>
            <p style="color: white;">Your go-to platform for exploring and contributing to the community.</p>
            <div class="map-content">
                <!-- Map Container -->
                <div id="map-container">
                    <div id="map"></div>
                    <script>
                        const menuItems = document.querySelectorAll('.menu-item');
                        menuItems.forEach(item => {
                            item.addEventListener('click', () => {
                                // Uncheck the checkbox to close the menu
                                document.getElementById('menu-toggle').checked = false;
                            });
                        });
                        const map = L.map('map').setView([43.13601, -70.93238], 14.5);
                        const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            maxZoom: 19,
                            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                        }).addTo(map);
                        
                        const locations = [
                        {
                                name: "Memorial Union Building (MUB)",
                                latLng: [43.13444, -70.93083],
                                desc: "Core facilities at UNH including the UNH Bookstore, Campus Services, Games Room, and more. <br>Tags: Events, Services, Information desk, Granite State Room, Strafford Room",
                                link: "https://www.unh.edu/mub/"
                            },
                            {
                                name: "Thompson Hall (T-hall)",
                                latLng: [43.13601, -70.93238],
                                desc: "Thompson Hall, known affectionately as T-Hall, is an icon of the Durham campus. It is recognizable for its clock tower and colonial-style architecture, making it a symbolic and historic landmark. T-Hall is the home of UNH Graduate School",
                                link: "https://gradschool.unh.edu"
                            },
                            {
                                name: "Dimond Library",
                                latLng: [43.13544923700985, -70.93326597669162],
                                desc: "The Dimond Library is the main library on campus and houses collections supporting the humanities, social sciences, business, health sciences, human services, education, and earth sciences. It is also home to the federal and state depository publication collections, multimedia, Special Collections, University Archives, and the University Museum. Students enjoy using the library's quiet rooms and comfortable seating to study.<br>Tags: reading, books, study spot, diamond",
                                link: "https://library.unh.edu/locations/dimond-library"
                            }
                        ];

                        const markers = [];
                        locations.forEach(location => {
                            const marker = L.marker(location.latLng).addTo(map);
                            marker.bindPopup(`
                                <h3>${location.name}</h3>
                                <p>${location.desc}</p>
                                <a href="${location.link}" target="_blank">Learn more</a>
                            `);
                            markers.push({ marker, location });
                        });

                        function filterMarkers(searchTerm) {
                            markers.forEach(({ marker, location }) => {
                                const nameMatches = location.name.toLowerCase().includes(searchTerm.toLowerCase());
                                const descMatches = location.desc.toLowerCase().includes(searchTerm.toLowerCase());
                                if (nameMatches || descMatches) {
                                    marker.addTo(map); 
                                } else {
                                    map.removeLayer(marker);
                                }
                            });
                        }

                        document.getElementById('search-bar').addEventListener('input', (event) => {
                            const searchTerm = event.target.value;
                            filterMarkers(searchTerm);
                        });
                        
                    </script>
                </div>
            </div>
            
            <div class="intro-card">
                <h2>About Us</h2>
                <p>WildMap helps students discover and contribute to campus locations.</p>
                <p>
                    WildMap was created in hopes to help students discover the best places on campus, share their experiences, and connect with others. 
                    Whether you're here to review locations, find new spots, or find an event, we're glad to have you on board!
                </p>
            </div>
            <div class="reviews-content" style="margin-top: 10%;">
                <h1 style="color: black; text-align: center;">Recent Location Reviews</h1>
                <p style="color: white; text-align: center;">See what other users think about different locations. Filter by star rating to find the best reviews.</p>
                
                <div id="button-container">
                    <button class="add-review-btn" onclick="showForm()">+ Add Location Review</button>
                    <button class="add-request-btn" onclick="showForm()">+ Add New Location Request</button>
                </div>
        
                <!-- Expandable Form Section -->
                <div id="expandableForm" class="card mt-4">
                    <div class="card-body">
                        <form method="POST" action="/">
                            <div class="form-titles">
                                <label for="first_name">Name</label>
                                <input type="text" name="name" id="first_name" class="form-control" />
                            </div>
                            <div class="form-titles">
                                <label for="location_desc">Location Description</label>
                                <input type="text" name="location_desc" id="location_desc" class="form-control" />
                            </div>
                            <div class="form-titles">
                                <label for="general_desc">General Descriptions</label>
                                <input type="text" name="general_desc" id="general_desc" class="form-control" />
                            </div>
                            <div class="form-titles">
                                <input type="submit" class="btn-success" value="Submit" />
                            </div>
                        </form>
                    </div>
                </div>
            
            <script>
                // Function to toggle form visibility on button clicks
                const form = document.getElementById('expandableForm');
                const addReviewBtn = document.querySelector('.add-review-btn');
                const addRequestBtn = document.querySelector('.add-request-btn');
        
                function toggleForm() {
                    if (form.style.display === 'none' || form.style.display === '') {
                        form.style.display = 'block';
                    } else {
                        form.style.display = 'none';
                    }
                }
        
                // Event listeners for the buttons
                addReviewBtn.addEventListener('click', toggleForm);
                addRequestBtn.addEventListener('click', toggleForm);
            </script>


                <!-- Filter Section -->
                <div id="filter-container" style="margin-top: 20px; margin-bottom: 20px;">
                    <label for="star-filter">Filter by Stars:</label>
                    <select id="star-filter">
                        <option value="all">All</option>
                        <option value="5">5 Stars</option>
                        <option value="4">4 Stars</option>
                        <option value="3">3 Stars</option>
                        <option value="2">2 Stars</option>
                        <option value="1">1 Star</option>
                    </select>
                </div>
    
                <!-- Reviews Section -->
                <div id="reviews">
                    <div class="review-card" data-stars="5">
                        <div class="review-stars">★★★★★</div>
                        <div class="review-title">Hamel Recreational Center</div>
                        <div class="review-description">
                            Amazing facility with everything you want in a gym! 
                        </div>
                        <div class="review-meta">
                            <span>Reviewed by: Alex</span>
                            <span>2 days ago</span>
                        </div>
                    </div>
    
                    <div class="review-card" data-stars="4">
                        <div class="review-stars">★★★★☆</div>
                        <div class="review-title">Holloway Commons</div>
                        <div class="review-description">
                            I love the most of the food but not all of it.
                        </div>
                        <div class="review-meta">
                            <span>Reviewed by: Jamie</span>
                            <span>1 week ago</span>
                        </div>
                    </div>
    
                    <div class="review-card" data-stars="3">
                        <div class="review-stars">★★★☆☆</div>
                        <div class="review-title">Kingsbury Hall</div>
                        <div class="review-description">
                            The bathrooms need some work. 
                        </div>
                        <div class="review-meta">
                            <span>Reviewed by: Casey</span>
                            <span>3 weeks ago</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Events and info goes here -->
    </div>
</body>
</html>
